# 주소변환(Address Translation)

**가상 주소를 물리 주소로 변환**하는 것을 **주소변환** 이라고 합니다.   
이는 가상 메모리 관리의 핵심 과정으로, 프로그램이 실행되는 동안 모든 **메모리 참조를 실제 메모리 위치로 재지정**합니다.

---

## 주소 변환의 목적
1. 효율성 : 하드웨어(TLB, 레지스터 등)의 도움으로 빠르게 주소를 변환  
2. 제어 : 프로세스가 자신의 메모리 외부로 접근하지 못하도록 보호  
3. 유연성 : 프로그래머가 주소 공간을 자유롭게 활용 가능
---

## 주소 변환 방식 : 동적 재배치(Dynamic Relocation)
- CPU에 베이스(Base) 레지스터와 바운드(Bound) 레지스터를 사용.
- 가상 주소를 물리 주소로 변환하며, 메모리 보호 기능 제공

### 베이스 레지스터
- 역할 : 프로그램이 메모리에 로드될 물리적 시작 위치 지정
- 변환 공식 : 물리 주소 = 가상 주소 + Base값

### 바운드 레지스터
- 역할 : 가상 주소가 유효한 범위에 있는지 확인.
- 검사 방법 : 가상 주소가 바운드 값보다 크거나 음수이면 예외 발생시켜 메모리 침범을 방지한다.
- 
---

## 주소 변환을 위한 하드웨어 : MMU(Memory Management Unit)
- MMU : 베이스와 바운드 레지스터를 사용하여 주소 변환과 메모리 보호를 담당
- 프로세스 전환 시 작업 :
  1. 현재 프로세스의 베이스, 바운드 값을 PCB(프로세스 제어 블록)에 저장.
  2. 새 프로세스 실행 시, 베이스와 바운드 값 복원

---
## 운영체제 개입 시점
1. 프로세스 생성 시 : 빈공간 리스트를 검색하여 메모리 공간 할당
2. 프로세스 종료 시 : 사용한 메모리를 회수하고 빈공간 리스트 업데이트.
3. 프로세스 전환 시 : 레지스터 값을 저장/복원
4. 예외 발생 시 : 메모리 침범 등 예외를 처리하는 핸들러 실행.

---

## 동적 재배치 단점
- 내부 단편화(Internal Fragmentation) : 연속적인 물리 메모리 할당으로 힙과 스택 사이에 사용되지 않는 공간 발생.
- 해결책 : **세그멘테이션**을 사용하여 베이스-바운드 기법을 일반화

---

## 요약
주소 변환은 가상 주소를 물리 주소로 동적으로 매핑하여 메모리 보호와 효율적인 사용을 지원합니다.  
베이스,바운드 레지스터는 변환과 보호를 수행하고, 운영체제는 프로세스 생성,전환,종료 시 이를 관리합니다.  
그러나 내부 단편화 무제로 세그멘테이션 등의 기술이 추가적으로 사용됩니다.  

---
### 참고자료
- https://inblog.ai/soultree/os-%ED%95%98%EB%93%9C%EC%9B%A8%EC%96%B4-%EA%B8%B0%EB%B0%98-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%A3%BC%EC%86%8C-%EB%B3%80%ED%99%98-18951
